pval.coord=c(16,0.4),
ggtheme = theme_bw(),
#palette = c("#0878A4","#1ECFD6","#EDD170","#C05640"))+
#palette = c("#C7F6E0","#107050","#02231C","#4DD8AD"),
palette = c("red",'black',"dodgerblue1"),
font.main = c("bold","black"),
font.x = c(12,"bold","black"),
font.y = c(12,"bold","black"),
font.tickslab = c(11,"bold","black"),
legend.labs = c('PLCO','SELECT','SABOR'),
legend.title = "Cohort")+
guides(colour = guide_legend(nrow = 3))
ggarrange(gsurv_any$plot,gsurv_any_imp$plot,nrow = 1, ncol = 2,common.legend = TRUE)
gsurv_any
surv_combined <- bind_rows(select(surv_dat, -one_of('high_grade')),
filter(surv_dat_imp,imp==1))
surv_combined$cohort <- factor(surv_combined$cohort, levels = c("PLCO","SELECT", "SABOR",'PLCO (Imputed delay)',
'SELECT (Imputed delay)',
'SABOR (Imputed delay)'))
pca_fit <- survfit(Surv(time_year,pca)~cohort,data = filter(surv_combined,grepl('^SELECT',cohort)))
gsurv_any_imp <- ggsurvplot(pca_fit, data = filter(surv_combined), risk.table = F,title = "Any Cancer (Imputed delay)", fun = 'event',
surv.median.line=c('hv'),conf.int = F,pval = F,test.for.trend = F,axes.offset=F,xlim = c(0,16),ylim = c(0,.1),
censor.shape = c(""),
cumevents = T,
pval.coord=c(16,0.4),
ggtheme = theme_bw(),
#palette = c("#0878A4","#1ECFD6","#EDD170","#C05640"))+
#palette = c("#C7F6E0","#107050","#02231C","#4DD8AD"),
#palette = c("red",'black',"dodgerblue1"),
font.main = c("bold","black"),
font.x = c(12,"bold","black"),
font.y = c(12,"bold","black"),
font.tickslab = c(11,"bold","black"),
#legend.labs = c("PLCO","SELECT", "SABOR",'PLCO (Imputed delay)',
#                 'SELECT (Imputed delay)',
#                'SABOR (Imputed delay)'),
legend.title = "Cohort")+
guides(colour = guide_legend(nrow = 3))
gsurv_any_imp
pca_fit <- survfit(Surv(time_year,pca)~cohort,data = filter(surv_combined,grepl('^PLCO',cohort)))
gsurv_any_imp <- ggsurvplot(pca_fit, data = filter(surv_combined), risk.table = F,title = "Any Cancer (Imputed delay)", fun = 'event',
surv.median.line=c('hv'),conf.int = F,pval = F,test.for.trend = F,axes.offset=F,xlim = c(0,13),ylim = c(0,.15),
censor.shape = c(""),
cumevents = F,
pval.coord=c(16,0.4),
ggtheme = theme_bw(),
#palette = c("#0878A4","#1ECFD6","#EDD170","#C05640"))+
#palette = c("#C7F6E0","#107050","#02231C","#4DD8AD"),
#palette = c("red",'black',"dodgerblue1"),
font.main = c("bold","black"),
font.x = c(12,"bold","black"),
font.y = c(12,"bold","black"),
font.tickslab = c(11,"bold","black"),
#legend.labs = c("PLCO","SELECT", "SABOR",'PLCO (Imputed delay)',
#                 'SELECT (Imputed delay)',
#                'SABOR (Imputed delay)'),
legend.title = "Cohort")+
guides(colour = guide_legend(nrow = 3))
gsurv_any_imp
surv_dat_imp_avg = surv_dat_imp %>% group_by(case_id,cohort) %>%
summarise(time_year = mean(imp_yr,na.rm=T),
pca = (mean(pca,na.rm = T))) %>%
mutate(cohort = paste(cohort,'(Imputed delay)')
surv_dat_imp_avg = surv_dat_imp %>% group_by(case_id,cohort) %>%
summarise(time_year = mean(imp_yr,na.rm=T),
pca = (mean(pca,na.rm = T))) %>%
mutate(cohort = paste(cohort,'(Imputed delay)'))
surv_dat_imp_avg = surv_dat_imp %>% group_by(case_id,cohort) %>%
summarise(time_year = mean(imp_yr,na.rm=T),
pca = (mean(pca,na.rm = T))) %>%
mutate(cohort = paste(cohort,'(Imputed delay)'))
rm(list=ls())
set.seed( 2011 )
library("adapr")
source.file <-"impute_delay.R"
project.id <- "Gelfond_144"
source_info <- create_source_file_dir(source.description="")
#Library statements here
Library('tidyverse')
Library("plyr")
Library("dplyr")
# Program body here
#------------------------------------------------------------------------------------------------------------------------------------
#
#
#------------------------------------------------------------------------------------------------------------------------------------
sabor <- Load.branch("sabor_dat.Rdata")
select_imp_list <- Load.branch("mice.R/SELECT_imp_list.Rdata")
plco_imp_list <- Load.branch("mice.R/PLCO_imp_list.Rdata")
#plco <- Load.branch("processed_plco_data.Rdata")
#select <- Load.branch("process_SELECT_data.R/cmprisk_select_data.Rdata")
plco <- plco_imp_list[[1]]
select <- select_imp_list[[1]]
#----------------------------------------------------------------------------------------------------------------------------------
#
# Select appropriate variables from each study
#----------------------------------------------------------------------------------------------------------------------------------
#detach('package:plyr')
sabor_sub <- sabor %>%
select(pca,high_grade,time_yr) %>%
rename(time_year = time_yr) %>%
mutate(cohort = "SABOR") %>%
filter(!is.na(time_year))
select_sub <- select %>%
select(pca, high_grade, time_yr) %>%
rename(time_year = time_yr) %>%
mutate(cohort = "SELECT")
plco_sub <- plco %>%
select(pca, high_grade, time_yr) %>%
rename(time_year = time_yr) %>%
mutate(cohort = "PLCO")
#----------------------------------------------------------------------------------------------------------------------------------
#
# Combine data from all studies
#----------------------------------------------------------------------------------------------------------------------------------
surv_dat <- bind_rows(sabor_sub, select_sub, plco_sub)
surv_dat %>% group_by(cohort) %>%
summarise(min = (min(time_year,na.rm = T)),
max = max(time_year,na.rm = T))
surv_dat$case_id <- 1:nrow(surv_dat)
#------------------------------------------------------------------------------------------------------------------------------------
#
# Impute delay within 6 months of diagnosis
#------------------------------------------------------------------------------------------------------------------------------------
?runif
runif(1,0,0.5)
#df <- filter(surv_dat,case_id==1)
reps = 5
delay = 1
surv_dat_imp <- plyr::ddply(surv_dat,'case_id',function(df){
imp_yr = rep(0,reps)
pca = rep(df$pca,reps)
imp_yr = ifelse(pca == 1, df$time_year - runif(reps,0,min(c(delay,df$time_year))), rep(df$time_year,reps))
imp = 1:reps
cohort=rep(df$cohort,reps)
return(data.frame(imp_yr,imp,cohort,pca))
},.parallel = TRUE)
#surv_dat <- surv_dat %>% mutate(time_yr_imp_pca = ifelse(pca == 1, time_year - runif(1,0,0.5), time_year),
#                    time_yr_imp_hgrade = ifelse(high_grade == 1, time_year - runif(1,0,0.5), time_year))
surv_dat_imp_avg = surv_dat_imp %>% group_by(case_id,cohort) %>%
summarise(time_year = mean(imp_yr,na.rm=T),
pca = (mean(pca,na.rm = T))) %>%
mutate(cohort = paste(cohort,'(Imputed delay)'))
plot(survfit(Surv(time_year,pca)~cohort,data=subset(surv_dat,cohort %in% c("SELECT (Imputed delay)"))))
surv_dat_imp$time_year <- surv_dat_imp$imp_yr
surv_dat_imp$cohort <-  paste(surv_dat_imp$cohort,"Imp")
surv_dat_imp$cohort
surv_dat2 <-  rbind.fill(surv_dat_imp,surv_dat)
plot(survfit(Surv(time_year,pca)~cohort,data=subset(surv_dat2,cohort %in% c("SELECT","SELECT Imp"))))
plot.survival()
?plot.survival
library(survival)
?plot.survival
?? plot
plot(survfit(Surv(time_year,pca)~cohort,,data=subset(surv_dat2,cohort %in% c("SELECT","SELECT Imp"))),
fun=function(x){1-x})
plot(survfit(Surv(time_year,pca)~cohort,,data=subset(surv_dat2,cohort %in% c("SELECT","SELECT Imp"))),
fun=function(x){1-x},main=("Observed PCa Time (black) vs. Imputed Smoother (red)"),xlab="Year",ylab="Incidence")
plot(col=1:2,survfit(Surv(time_year,pca)~cohort,,data=subset(surv_dat2,cohort %in% c("SELECT","SELECT Imp"))),
fun=function(x){1-x},main=("Observed PCa Time (black) vs. Imputed Smoother (red)"),xlab="Year",ylab="Incidence")
library(here)
here::here()
source('~/Documents/Projects/adaprHome/Programs/docId.R')
? here::here
adapr::importProject
makeImporter
source('~/Documents/Projects/adaprHome/Programs/docId.R')
print(parent.frame(2)$ofile)
Digest
? digest::digest
source('~/Documents/Projects/adapr/R/witchDoc.R')
sourceFinder <- function(parentFile0=parent.frame(2)$ofile)
sourceFinder(parentFile0=parent.frame(2)$ofile)
sourceFinder <- function(parentFile0=parent.frame(2)$ofile){
parentFile <- ifelse(is.null(parentFile0),"Interactive",parentFile0)
pHash <- ifelse(is.null(parentFile0),"",digest::digest(file=parentFile,serialize = FALSE,algo="sha1"))
parentInfo <- data.frame(parentFile=basename(parentFile),parentHash=pHash)
rownames(parentInfo) <- NULL
return(parentInfo)
}
sourceFinder(parentFile0=parent.frame(2)$ofile)
source('~/Documents/Projects/adaprHome/Programs/docId.R')
source('~/Documents/Projects/adaprHome/Programs/docId.R')
source('~/Documents/Projects/adaprHome/Programs/docId.R')
source('~/Documents/Projects/adapr/R/witchDoc.R')
library(adapr)
source('~/Documents/Projects/adaprHome/Programs/docId.R')
library(adapr)
source('~/Documents/Projects/adaprHome/Programs/docId.R')
source('~/Documents/Projects/adapr/R/create_markdown.R')
source('~/Documents/Projects/adaprHome/Programs/docId.R')
showResults()
showResults()
source('~/Documents/Projects/adaprHome/Programs/docId.R')
source('~/Documents/Projects/adapr/R/create_markdown.R')
source('~/Documents/Projects/adaprHome/Programs/docId.R')
library(adapr)
codeChunkDocId()
docIDcomputed()
source('~/Documents/Projects/adapr/R/witchDoc.R')
source('~/Documents/Projects/adapr/R/witchDoc.R')
docIDcomputed()
library(adapr)
codeChunkDocId()
docIDcomputed()
source('~/Documents/Projects/adaprHome/Programs/docId.R')
docIDcomputed()
source('~/Documents/Projects/adapr/R/witchDoc.R')
docIDcomputed()
source('~/Documents/Projects/adapr/R/witchDoc.R')
library(adapr)
adaprUpdate()
source('~/Documents/Projects/adaprHome/Programs/docId.R')
createMarkdown(si=getSourceInfo(),overwrite = TRUE)
docIDcomputed()
source('~/Documents/Projects/adaprHome/Programs/docId.R')
source('~/Documents/Projects/adaprHome/Programs/docId.R')
showResults()
source('~/Documents/Projects/adaprHome/Programs/docId.R')
showResults()
docIDcomputed()
library(adapr)
showResults()
source('~/Documents/Projects/adaprHome/Programs/docId.R')
showResults()
source('~/Documents/Projects/adaprHome/Programs/docId.R')
source('~/Documents/Projects/adaprHome/Programs/docId.R')
runScript()
openMarkdown()
require("adapr")
require("methods")
require("knitr")
#If TRUE then will "knit" in RStudio
if(FALSE){scriptLoader("adaprHome","docId.R")}
require("adapr")
require("methods")
require("knitr")
printDocId(bornTF = FALSE,gitTF=TRUE)
source('~/Documents/Projects/adaprHome/Programs/docId.R')
library(adapr)
q)_
q()
require("adapr")
require("methods")
Library("tableone")
require("knitr")
Library(c("Publish","tableone","ggplot2"))
paste0("Created on ",(Sys.time() ))
paste0("Created on ",(Sys.time() ))
#If TRUE then will "knit" in RStudio
try({rm(source_info)})
if(TRUE){scriptLoader("Weiner_SNP","gather_rpt29.R")}
echoYN <- TRUE
echoSet <- echoYN
Receive("tab_29s")
kable(print(tab_29s,printToggle=FALSE,nonnormal = TRUE,showAllLevels=TRUE)[,-5])
Receive("tab1Black29")
kable(print(tab1Black29,printToggle=FALSE,nonnormal = TRUE,showAllLevels=TRUE)[,-5])
temp <- loadFlex("modelList.rda")[["Black"]]
kable(linearRegression.table(temp))
temp <- loadFlex("modelList.rda")[["NotBlack"]]
kable(linearRegression.table(temp))
temp <- loadFlex("barAUC300.rda")+ylab("sf")
Receive("ls2")
temper3 <- subset(ls2,(RPTMG==900)&(Race=="Black")&(foodBinary=="Food"))
barAUC300 <- ggplot(temper3,aes(rs1803155,ProbLT300))+geom_bar(stat="identity")+facet_grid(Regimen~Gender)+ggtitle("Expected Probabilities < AUC 300 in 900mg in Black")
barAUC300 <- barAUC300 + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
#Graph("test.png")
print(barAUC300)
#dev.off()
Receive("barAUC300NotBlack")
temper <- subset(ls2,(RPTMG==900)&(Race=="NotBlack")&(foodBinary=="Food"),select=c("rs1803155","ProbLT300","Gender","Regimen"))
barAUC300NotBlack <- ggplot(temper,aes(rs1803155,ProbLT300))+geom_bar(stat="identity")+facet_grid(Regimen~Gender)+ggtitle("Expected Probabilities < AUC 300 in 900mg in Not Black")
barAUC300NotBlack <- barAUC300NotBlack + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
print(barAUC300NotBlack)
temper <- subset(ls2,(RPTMG==900)&(Regimen=="Regimen29x")&(foodBinary=="Food"))
barAUC30029x <- ggplot(subset(ls2,(RPTMG==900)&(Regimen=="Regimen29x")&(foodBinary=="Food")),aes(rs1803155,(ProbLT300)))+geom_bar(stat="identity")+facet_grid(Race~Gender)+ggtitle("Expected Probabilities < AUC 300 in 900mg in study 29x")
barAUC30029x <- barAUC30029x + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
print(barAUC30029x)
temper <- subset(ls2,(RPTMG==1200)&(Regimen=="Regimen29x")&(foodBinary=="Food"))
View(ls2)
temper <- subset(ls2,(RPTMG==900)&(Regimen=="Regimen29x")&(foodBinary=="Food"))
barAUC30029x <- ggplot(subset(ls2,(RPTMG==900)&(Regimen=="Regimen29x")&(foodBinary=="Food")),aes(rs1803155,(ProbLT300)))+geom_bar(stat="identity")+facet_grid(Race~Gender)+ggtitle("Expected Probabilities < AUC 300 in 900mg in study 29x")
barAUC30029x <- barAUC30029x + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
print(barAUC30029x)
temper <- subset(ls2,(RPTMG==1200)&(Regimen=="Regimen29x")&(foodBinary=="Food"))
barAUC30029x <- ggplot(subset(ls2,(RPTMG==900)&(Regimen=="Regimen29x")&(foodBinary=="Food")),aes(rs1803155,(ProbLT350)))+geom_bar(stat="identity")+facet_grid(Race~Gender)+ggtitle("Expected Probabilities < AUC 300 in 900mg in study 29x")
barAUC30029x <- barAUC30029x + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
print(barAUC30029x)
View(ls2)
View(ls2)
anum <- function(x){as.numeric(gsub("%","",as.character()))}
temper <- subset(ls2,(RPTMG==900)&(Regimen=="Regimen29x")&(foodBinary=="Food"))
barAUC30029x <- ggplot(subset(ls2,(RPTMG==900)&(Regimen=="Regimen29x")&(foodBinary=="Food")),aes(rs1803155,(ProbLT300)))+geom_bar(stat="identity")+facet_grid(Race~Gender)+ggtitle("Expected Probabilities < AUC 300 in 900mg in study 29x")
barAUC30029x <- barAUC30029x + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
anum <- function(x){as.numeric(gsub("%","",as.character()))}
print(barAUC30029x)
temper <- subset(ls2,(RPTMG==1200)&(Regimen=="Regimen29x")&(foodBinary=="Food"))
barAUC30029x <- ggplot(subset(ls2,(RPTMG==900)&(Regimen=="Regimen29x")&(foodBinary=="Food")),aes(rs1803155,anum(ProbLT350)))+geom_bar(stat="identity")+facet_grid(Race~Gender)+ggtitle("Expected Probabilities < AUC 300 in 900mg in study 29x")
barAUC30029x <- barAUC30029x + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
print(barAUC30029x)
anum <- function(x){as.numeric(gsub("%","",as.character()))}
anum(temper$ProbLT350)
(temper$ProbLT350)
anum <- function(x){as.numeric(gsub("\\%","",as.character()))}
anum(temper$ProbLT350)
anum <- function(x){as.numeric(gsub("\\%","",as.character(x)))}
anum(temper$ProbLT350)
temper <- subset(ls2,(RPTMG==900)&(Regimen=="Regimen29x")&(foodBinary=="Food"))
barAUC30029x <- ggplot(subset(ls2,(RPTMG==900)&(Regimen=="Regimen29x")&(foodBinary=="Food")),aes(rs1803155,(ProbLT300)))+geom_bar(stat="identity")+facet_grid(Race~Gender)+ggtitle("Expected Probabilities < AUC 300 in 900mg in study 29x")
barAUC30029x <- barAUC30029x + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
anum <- function(x){as.numeric(gsub("\\%","",as.character(x)))}
print(barAUC30029x)
temper <- subset(ls2,(RPTMG==1200)&(Regimen=="Regimen29x")&(foodBinary=="Food"))
barAUC30029x <- ggplot(subset(ls2,(RPTMG==900)&(Regimen=="Regimen29x")&(foodBinary=="Food")),aes(rs1803155,anum(ProbLT350)))+geom_bar(stat="identity")+facet_grid(Race~Gender)+ggtitle("Expected Probabilities < AUC 300 in 900mg in study 29x")
barAUC30029x <- barAUC30029x + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
print(barAUC30029x)
temper <- subset(ls2,(RPTMG==1200)&(Regimen=="Regimen29x")&(foodBinary=="Food"))
temper <- subset(ls2,(RPTMG==900)&(Regimen=="Regimen29x")&(foodBinary=="Food"))
barAUC30029x <- ggplot(subset(ls2,(RPTMG==900)&(Regimen=="Regimen29x")&(foodBinary=="Food")),aes(rs1803155,(ProbLT300)))+geom_bar(stat="identity")+facet_grid(Race~Gender)+ggtitle("Expected Probabilities < AUC 300 in 900mg in study 29x")
barAUC30029x <- barAUC30029x + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
anum <- function(x){as.numeric(gsub("\\%","",as.character(x)))}
print(barAUC30029x)
temper <- subset(ls2,(RPTMG==1200)&(Regimen=="Regimen29x")&(foodBinary=="Food"))
barAUC30029x <- ggplot(subset(ls2,(RPTMG==900)&(Regimen=="Regimen29x")&(foodBinary=="Food")),aes(rs1803155,anum(ProbLT350)))+geom_bar(stat="identity")+facet_grid(Race~Gender)+ggtitle("Expected Probabilities < AUC 300 in 900mg in study 29x")
barAUC30029x <- barAUC30029x + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
print(barAUC30029x)
temper <- subset(ls2,(RPTMG==1200)&(Regimen=="Regimen29x")&(foodBinary=="Food"))
temper
temper <- subset(ls2,(RPTMG==900)&(Regimen=="Regimen29x")&(foodBinary=="Food"))
barAUC30029x <- ggplot(subset(ls2,(RPTMG==900)&(Regimen=="Regimen29x")&(foodBinary=="Food")),aes(rs1803155,(ProbLT300)))+geom_bar(stat="identity")+facet_grid(Race~Gender)+ggtitle("Expected Probabilities < AUC 300 in 900mg in study 29x")
barAUC30029x <- barAUC30029x + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
anum <- function(x){as.numeric(gsub("\\%","",as.character(x)))}
print(barAUC30029x)
temper <- subset(ls2,(RPTMG==1200)&(Regimen=="Regimen29x")&(foodBinary=="Food"))
barAUC30029x <- ggplot(subset(ls2,(RPTMG==900)&(Regimen=="Regimen29x")&(foodBinary=="Food")),aes(rs1803155,anum(ProbLT350)))+geom_bar(stat="identity")+facet_grid(Race~Gender)+ggtitle("Expected Probabilities < AUC 300 in 900mg in study 29x")
barAUC30029x <- barAUC30029x + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
print(barAUC30029x)
temper <- subset(ls2,(RPTMG==1200)&(Regimen=="Regimen29x")&(foodBinary=="Food"))
<- subset(ls2,(Regimen=="Regimen29x")&(foodBinary=="Food"))
temper <- subset(ls2,(RPTMG==900)&(Regimen=="Regimen29x")&(foodBinary=="Food"))
barAUC30029x <- ggplot(subset(ls2,(RPTMG==900)&(Regimen=="Regimen29x")&(foodBinary=="Food")),aes(rs1803155,(ProbLT300)))+geom_bar(stat="identity")+facet_grid(Race~Gender)+ggtitle("Expected Probabilities < AUC 300 in 900mg in study 29x")
barAUC30029x <- barAUC30029x + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
anum <- function(x){as.numeric(gsub("\\%","",as.character(x)))}
print(barAUC30029x)
temper <- subset(ls2,(RPTMG==1200)&(Regimen=="Regimen29x")&(foodBinary=="Food"))
barAUC30029x <- ggplot(subset(ls2,(RPTMG==900)&(Regimen=="Regimen29x")&(foodBinary=="Food")),aes(rs1803155,anum(ProbLT350)))+geom_bar(stat="identity")+facet_grid(Race~Gender)+ggtitle("Expected Probabilities < AUC 300 in 900mg in study 29x")
barAUC30029x <- barAUC30029x + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
print(barAUC30029x)
temper <- subset(ls2,(RPTMG==1200)&(Regimen=="Regimen29x")&(foodBinary=="Food"))
print(subset(ls2,(Regimen=="Regimen29x")&(foodBinary=="Food")))
barAUC30029x2 <- ggplot(temper,aes(rs1803155,(ProbLT300)))+geom_bar(stat="identity")+facet_grid(Race~Gender)+ggtitle("Expected Probabilities < AUC 300 in 1200mg in study 29x")
barAUC30029x2 <- barAUC30029x2 + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
print(barAUC30029x2)
temper <- subset(ls2,(RPTMG==900)&(Regimen=="Regimen29x")&(foodBinary=="Food"))
barAUC30029x <- ggplot(subset(ls2,(RPTMG==900)&(Regimen=="Regimen29x")&(foodBinary=="Food")),aes(rs1803155,(ProbLT300)))+geom_bar(stat="identity")+facet_grid(Race~Gender)+ggtitle("Expected Probabilities < AUC 300 in 900mg in study 29x")
barAUC30029x <- barAUC30029x + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
anum <- function(x){as.numeric(gsub("\\%","",as.character(x)))}
print(barAUC30029x)
temper <- subset(ls2,(RPTMG==1200)&(Regimen=="Regimen29x")&(foodBinary=="Food"))
barAUC30029x <- ggplot(subset(ls2,(RPTMG==900)&(Regimen=="Regimen29x")&(foodBinary=="Food")),aes(rs1803155,anum(ProbLT350)))+geom_bar(stat="identity")+facet_grid(Race~Gender)+ggtitle("Expected Probabilities < AUC 350 in 900mg in study 29x")
barAUC30029x <- barAUC30029x + ylab("% AUC < 350")+scale_y_continuous(limits = c(0,100))
print(barAUC30029x)
temper <- subset(ls2,(RPTMG==1200)&(Regimen=="Regimen29x")&(foodBinary=="Food"))
print(subset(ls2,(Regimen=="Regimen29x")&(foodBinary=="Food")))
barAUC30029x2 <- ggplot(temper,aes(rs1803155,(ProbLT300)))+geom_bar(stat="identity")+facet_grid(Race~Gender)+ggtitle("Expected Probabilities < AUC 300 in 1200mg in study 29x")
barAUC30029x2 <- barAUC30029x2 + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
print(barAUC30029x2)
barAUC30029x2 <- ggplot(temper,aes(rs1803155,anum(ProbLT350)))+geom_bar(stat="identity")+facet_grid(Race~Gender)+ggtitle("Expected Probabilities < AUC 350 in 1200mg in study 29x")
barAUC30029x2 <- barAUC30029x2 + ylab("% AUC < 350")+scale_y_continuous(limits = c(0,100))
print(barAUC30029x2)
barAUC30029x2 <- ggplot(temper,aes(rs1803155,(ProbLT300)))+geom_bar(stat="identity")+facet_grid(Race~Gender)+ggtitle("Expected Probabilities < AUC 300 in 1200mg in study 29x")
barAUC30029x2 <- barAUC30029x2 + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
print(barAUC30029x2)
barAUC30029x2 <- ggplot(temper,aes(rs1803155,anum(ProbLT350)))+geom_bar(stat="identity")+facet_grid(Race~Gender)+ggtitle("Expected Probabilities < AUC 350 in 1200mg in study 29x")
barAUC30029x2 <- barAUC30029x2 + ylab("% AUC < 350")+scale_y_continuous(limits = c(0,100))
print(barAUC30029x2)
print(temper)
temp <- loadFlex("barAUC300.rda")+ylab("sf")
Receive("ls2")
temper3 <- subset(ls2,(RPTMG==900)&(Race=="Black")&(foodBinary=="Food"))
barAUC300 <- ggplot(temper3,aes(rs1803155,ProbLT300))+geom_bar(stat="identity")+facet_grid(Regimen~Gender)+ggtitle("Expected Probabilities < AUC 300 in 900mg in Black")
barAUC300 <- barAUC300 + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
print(barAUC300)
barAUC350 <- ggplot(temper3,aes(rs1803155,anum(ProbLT350)))+geom_bar(stat="identity")+facet_grid(Regimen~Gender)+ggtitle("Expected Probabilities < AUC 350 in 900mg in Black")
barAUC350 <- barAUC350 + ylab("% AUC < 350")+scale_y_continuous(limits = c(0,100))
print(temp3)
temp <- loadFlex("barAUC300.rda")+ylab("sf")
Receive("ls2")
temper3 <- subset(ls2,(RPTMG==900)&(Race=="Black")&(foodBinary=="Food"))
barAUC300 <- ggplot(temper3,aes(rs1803155,ProbLT300))+geom_bar(stat="identity")+facet_grid(Regimen~Gender)+ggtitle("Expected Probabilities < AUC 300 in 900mg in Black")
barAUC300 <- barAUC300 + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
print(barAUC300)
barAUC350 <- ggplot(temper3,aes(rs1803155,anum(ProbLT350)))+geom_bar(stat="identity")+facet_grid(Regimen~Gender)+ggtitle("Expected Probabilities < AUC 350 in 900mg in Black")
barAUC350 <- barAUC350 + ylab("% AUC < 350")+scale_y_continuous(limits = c(0,100))
print(temper3)
#dev.off()
Receive("barAUC300NotBlack")
temper <- subset(ls2,(RPTMG==900)&(Race=="NotBlack")&(foodBinary=="Food"),select=c("rs1803155","ProbLT300","Gender","Regimen"))
barAUC300NotBlack <- ggplot(temper,aes(rs1803155,ProbLT300))+geom_bar(stat="identity")+facet_grid(Regimen~Gender)+ggtitle("Expected Probabilities < AUC 300 in 900mg in Not Black")
barAUC300NotBlack <- barAUC300NotBlack + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
print(barAUC300NotBlack)
barAUC300NotBlack <- ggplot(temper,aes(rs1803155,anum(ProbLT350)))+geom_bar(stat="identity")+facet_grid(Regimen~Gender)+ggtitle("Expected Probabilities < AUC 350 in 900mg in Not Black")
barAUC300NotBlack <- barAUC300NotBlack + ylab("% AUC < 350")+scale_y_continuous(limits = c(0,100))
print(barAUC300NotBlack)
temp <- loadFlex("barAUC300.rda")+ylab("sf")
Receive("ls2")
temper3 <- subset(ls2,(RPTMG==900)&(Race=="Black")&(foodBinary=="Food"))
barAUC300 <- ggplot(temper3,aes(rs1803155,ProbLT300))+geom_bar(stat="identity")+facet_grid(Regimen~Gender)+ggtitle("Expected Probabilities < AUC 300 in 900mg in Black")
barAUC300 <- barAUC300 + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
print(barAUC300)
barAUC350 <- ggplot(temper3,aes(rs1803155,anum(ProbLT350)))+geom_bar(stat="identity")+facet_grid(Regimen~Gender)+ggtitle("Expected Probabilities < AUC 350 in 900mg in Black")
barAUC350 <- barAUC350 + ylab("% AUC < 350")+scale_y_continuous(limits = c(0,100))
print(temper3)
#dev.off()
Receive("barAUC300NotBlack")
temper <- subset(ls2,(RPTMG==900)&(Race=="NotBlack")&(foodBinary=="Food"),select=c("rs1803155","ProbLT300","ProbLT350","Gender","Regimen"))
barAUC300NotBlack <- ggplot(temper,aes(rs1803155,ProbLT300))+geom_bar(stat="identity")+facet_grid(Regimen~Gender)+ggtitle("Expected Probabilities < AUC 300 in 900mg in Not Black")
barAUC300NotBlack <- barAUC300NotBlack + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
print(barAUC300NotBlack)
barAUC300NotBlack <- ggplot(temper,aes(rs1803155,anum(ProbLT350)))+geom_bar(stat="identity")+facet_grid(Regimen~Gender)+ggtitle("Expected Probabilities < AUC 350 in 900mg in Not Black")
barAUC300NotBlack <- barAUC300NotBlack + ylab("% AUC < 350")+scale_y_continuous(limits = c(0,100))
print(barAUC300NotBlack)
print(temper)
temp <- loadFlex("barAUC300.rda")+ylab("sf")
anum <- function(x){as.numeric(gsub("\\%","",as.character(x)))}
Receive("ls2")
temper3 <- subset(ls2,(RPTMG==900)&(Race=="Black")&(foodBinary=="Food"))
barAUC300 <- ggplot(temper3,aes(rs1803155,ProbLT300))+geom_bar(stat="identity")+facet_grid(Regimen~Gender)+ggtitle("Expected Probabilities < AUC 300 in 900mg in Black")
barAUC300 <- barAUC300 + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
print(barAUC300)
barAUC350 <- ggplot(temper3,aes(rs1803155,anum(ProbLT350)))+geom_bar(stat="identity")+facet_grid(Regimen~Gender)+ggtitle("Expected Probabilities < AUC 350 in 900mg in Black")
barAUC350 <- barAUC350 + ylab("% AUC < 350")+scale_y_continuous(limits = c(0,100))
print(kable(temper3))
#dev.off()
Receive("barAUC300NotBlack")
temper <- subset(ls2,(RPTMG==900)&(Race=="NotBlack")&(foodBinary=="Food"),select=c("rs1803155","ProbLT300","ProbLT350","Gender","Regimen"))
barAUC300NotBlack <- ggplot(temper,aes(rs1803155,ProbLT300))+geom_bar(stat="identity")+facet_grid(Regimen~Gender)+ggtitle("Expected Probabilities < AUC 300 in 900mg in Not Black")
barAUC300NotBlack <- barAUC300NotBlack + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
print(barAUC300NotBlack)
barAUC300NotBlack <- ggplot(temper,aes(rs1803155,anum(ProbLT350)))+geom_bar(stat="identity")+facet_grid(Regimen~Gender)+ggtitle("Expected Probabilities < AUC 350 in 900mg in Not Black")
barAUC300NotBlack <- barAUC300NotBlack + ylab("% AUC < 350")+scale_y_continuous(limits = c(0,100))
print(barAUC300NotBlack)
print(temper)
Norow.mat()
Norow.mat
? kabl3
? kable
barAUC30029x2 <- ggplot(temper,aes(rs1803155,(ProbLT300)))+geom_bar(stat="identity")+facet_grid(Race~Gender)+ggtitle("Expected Probabilities < AUC 300 in 1200mg in study 29x")
barAUC30029x2 <- barAUC30029x2 + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
print(barAUC30029x2)
require("adapr")
require("methods")
Library("tableone")
require("knitr")
Library(c("Publish","tableone","ggplot2"))
paste0("Created on ",(Sys.time() ))
paste0("Created on ",(Sys.time() ))
#If TRUE then will "knit" in RStudio
try({rm(source_info)})
if(TRUE){scriptLoader("Weiner_SNP","gather_rpt29.R")}
echoYN <- TRUE
echoSet <- echoYN
Receive("tab_29s")
kable(print(tab_29s,printToggle=FALSE,nonnormal = TRUE,showAllLevels=TRUE)[,-5])
Receive("tab1Black29")
kable(print(tab1Black29,printToggle=FALSE,nonnormal = TRUE,showAllLevels=TRUE)[,-5])
temp <- loadFlex("modelList.rda")[["Black"]]
kable(linearRegression.table(temp))
temp <- loadFlex("modelList.rda")[["NotBlack"]]
kable(linearRegression.table(temp))
temp <- loadFlex("barAUC300.rda")+ylab("sf")
anum <- function(x){as.numeric(gsub("\\%","",as.character(x)))}
Receive("ls2")
temper3 <- subset(ls2,(RPTMG==900)&(Race=="Black")&(foodBinary=="Food"))
barAUC300 <- ggplot(temper3,aes(rs1803155,ProbLT300))+geom_bar(stat="identity")+facet_grid(Regimen~Gender)+ggtitle("Expected Probabilities < AUC 300 in 900mg in Black")
barAUC300 <- barAUC300 + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
print(barAUC300)
barAUC350 <- ggplot(temper3,aes(rs1803155,anum(ProbLT350)))+geom_bar(stat="identity")+facet_grid(Regimen~Gender)+ggtitle("Expected Probabilities < AUC 350 in 900mg in Black")
barAUC350 <- barAUC350 + ylab("% AUC < 350")+scale_y_continuous(limits = c(0,100))
kable(temper3)
#dev.off()
Receive("barAUC300NotBlack")
temper <- subset(ls2,(RPTMG==900)&(Race=="NotBlack")&(foodBinary=="Food"),select=c("rs1803155","ProbLT300","ProbLT350","Gender","Regimen"))
barAUC300NotBlack <- ggplot(temper,aes(rs1803155,ProbLT300))+geom_bar(stat="identity")+facet_grid(Regimen~Gender)+ggtitle("Expected Probabilities < AUC 300 in 900mg in Not Black")
barAUC300NotBlack <- barAUC300NotBlack + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
print(barAUC300NotBlack)
barAUC300NotBlack <- ggplot(temper,aes(rs1803155,anum(ProbLT350)))+geom_bar(stat="identity")+facet_grid(Regimen~Gender)+ggtitle("Expected Probabilities < AUC 350 in 900mg in Not Black")
barAUC300NotBlack <- barAUC300NotBlack + ylab("% AUC < 350")+scale_y_continuous(limits = c(0,100))
print(barAUC300NotBlack)
kable(temper)
temper <- subset(ls2,(RPTMG==900)&(Regimen=="Regimen29x")&(foodBinary=="Food"))
barAUC30029x <- ggplot(subset(ls2,(RPTMG==900)&(Regimen=="Regimen29x")&(foodBinary=="Food")),aes(rs1803155,(ProbLT300)))+geom_bar(stat="identity")+facet_grid(Race~Gender)+ggtitle("Expected Probabilities < AUC 300 in 900mg in study 29x")
barAUC30029x <- barAUC30029x + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
print(barAUC30029x)
temper <- subset(ls2,(RPTMG==1200)&(Regimen=="Regimen29x")&(foodBinary=="Food"))
barAUC30029x <- ggplot(subset(ls2,(RPTMG==900)&(Regimen=="Regimen29x")&(foodBinary=="Food")),aes(rs1803155,anum(ProbLT350)))+geom_bar(stat="identity")+facet_grid(Race~Gender)+ggtitle("Expected Probabilities < AUC 350 in 900mg in study 29x")
barAUC30029x <- barAUC30029x + ylab("% AUC < 350")+scale_y_continuous(limits = c(0,100))
print(barAUC30029x)
temper <- subset(ls2,(RPTMG==1200)&(Regimen=="Regimen29x")&(foodBinary=="Food"))
kable(subset(ls2,(Regimen=="Regimen29x")&(foodBinary=="Food")))
barAUC30029x2 <- ggplot(temper,aes(rs1803155,(ProbLT300)))+geom_bar(stat="identity")+facet_grid(Race~Gender)+ggtitle("Expected Probabilities < AUC 300 in 1200mg in study 29x")
barAUC30029x2 <- barAUC30029x2 + ylab("% AUC < 300")+scale_y_continuous(limits = c(0,100))
print(barAUC30029x2)
barAUC30029x2 <- ggplot(temper,aes(rs1803155,anum(ProbLT350)))+geom_bar(stat="identity")+facet_grid(Race~Gender)+ggtitle("Expected Probabilities < AUC 350 in 1200mg in study 29x")
barAUC30029x2 <- barAUC30029x2 + ylab("% AUC < 350")+scale_y_continuous(limits = c(0,100))
print(barAUC30029x2)
kable(temper,row.names = FALSE)
showResults()
showResults()
as.Date("2017-09-21")-as.Date("2017-12-21")
as.Date("2017-09-21")-as.Date("2017-06-15")
